#!/usr/bin/env bash

################################################################################
#
# sciconn-wifi
# ============
#
# Scientific Wi-Fi Connection:
#   Start privoxy to forward SOCKS5 local server to Wi-Fi.
#
# @author AnqurVanillapy
# @date 13 October 2016
# @version 0.1.0
################################################################################

privoxy_conf="/etc/privoxy/config"
GREEN='\033[0;32m'
UNDER='\e[4m'
NC='\033[0m'

echo "Running privoxy with following config:"

grep -v '^#' < "$privoxy_conf" | {
    while read line; do
        for word in "listen-address" "forward-socks5t"; do
            if [[ "$line" == *"$word"* ]]; then
                echo -e "[${GREEN}Config${NC}] $line" | xargs
            fi
        done
    done
}

echo -e "See more in ${UNDER}$privoxy_conf${NC} ..."
privoxy --no-daemon $privoxy_conf
